# 工作集理论
为了解决[[抖动现象与却缺页率#^d2173c|抖动现象]]，引入了工作集的概念。工作集是基于[[局部性原理]]做的假设，如果能预知程序在某段时间间隔内要访问哪些页面，并能提前将他们调入内存，就会大大降低缺页率，从而减少置换工作，提高CPU利用率。

工作集是最近n次内存访问的页面的集合，数字n被称为工作集窗口，也就是工作集的大小。经常被使用的页面会在工作集中，若一个页面不再被使用，则它会被从工作集中丢弃。当一个进程寻址一个不在工作集内的页面时，会产生一个缺页中断。在处理缺页中断时，更新工作集并在需要时从磁盘中读入此页面。

## 工作集模型原理
让操作系统监视更进程的工作集，主要是监视各个工作集的大小。若有空闲的物理块，则可以再调入一个进程到内存提高CPU利用率；若工作集的大小总和增加超过了所有可用物理块的数量总和，则操作系统可以选择一个内存中的进程对换到磁盘中去，以减少内存中的进程数量来防止抖动的发生。

# 页面分配策略
- 固定分配局部置换：为每个进程分配一定数目的物理块，这个数目是固定的，进程运行期间都不会改变。这样，进程之间不会争夺物理块，会导致有些进程因为物理块太少而频繁的缺页中断，有些进程由于分配的物理块太多而浪费内存空间。
- 可变分配全局置换：操作系统维护一个空闲物理块队列，每次有进程缺页时都从空闲物理块队列上取下一个分配给他，如果系统中已经没有空闲的物理块了，那么系统将有可能调出任何进程中的其中一页。
- 可变分配局部置换：为每个进程分配一定量的物理块后，每次发生缺页中断且内存中没有空闲物理块时，只让进程换出自己的某个内存页，但当一个进程频繁的发生缺页中断呢时，操作系统会为他分配额外物理块，直到缺页率降低到合适程度为止，当一个进程缺页率特别低时，会适当减少分配给他的物理块数量。

# 页面调入策略
- 请求调入策略：一个页面只有在被用到的时候才会被调入到内存中，否则就放在外存中。这种调页方式在一个进程刚启动时会频繁的出现缺页中断，这是因为一开始内存中没有该进程的任何页面。该策略实现简单，单容易产生较多的缺页中断，时间开销大，容易产生抖动现象。
- 预调页策略：该策略是指将预计不久之后会被用到的页面一并调入到内存中，尽管暂时他们还没有被用到。在程序启动时，如果程序员能指出哪些页面是首先应该被调入的，并把它们放在一起，那么通过预调页策略就可以一次性的把他们调入内存，从而可以节省不少的时间，这是一种基于[[局部性原理]]的预测，通常用于程序的首次调入。

# 从何处调入页面
请求分页系统中的外存分为两部分：用于存放文件的文件区和用于存放置换页面的对换区。通常，对换区是采用连续分配方式，而文件是采用离散分配方式，因此对换区的磁盘I/O速度比文件区更高。
- 系统拥有足够的对换区空间：这时可以全部从对换区调入所需页面，以提高调页速度。为此，在进程运行前，便应将与该进程有关的文件从文件区复制到对换区。
- 系统缺少足够的对换区空间：这时凡是不会被修改的文件，都直接从文件区调入；而对于可能被修改的部分，在将它们换出时，都应该调入到对换区，以后需要时再从对换区调入。
- UNIX方式：由于进程有关的文件都放在文件区，因此凡是未运行的页面都应该从文件区调入。而对于曾经运行过但是又被换出的页面，由于是被放在对换区，因此在下次调入时，应从对换区调入。而且UNIX系统允许页面共享，因此某进程所请求的页面有可能已经被其他程序调入内存，此时也就无需再从对换区调入。