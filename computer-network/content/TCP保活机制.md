定义一个时间段，在这个时间段内，如果没有任何连接相关的活动，TCP保活机制会开始作用，每隔一个时间间隔，发送一个探测报文，该探测报文包含的数据非常少，如果连续几个探测报文都没有得到响应，则认为当前的TCP连接已经死亡，系统内核将错误信息通知给上层应用程序。

在Linux内核有对应的参数可以设置保活时间、保活探测的次数、保活探测的时间间隔
- net.ipv4.tcp_keepalive_time=7200表示保活时间是7200秒（2小时），也就2小时内如果没有任何连接相关的活动，则会启动保活机制
- net.ipv4.tcp_keepalive_intvl=75表示每次检测间隔75秒
- net.ipv4.tcp_keepalive_probes=9表示检测9次无响应，认为对方是不可达的，从而中断本次的连接


对于TCP保活机制有以下几种情况：
- 对端程序是正常工作的。当TCP保活的探测报文发送给对端, 对端会正常响应，这样TCP保活时间会被重置，等待下一个TCP保活时间的到来
- 对端程序崩溃并重启。当TCP保活的探测报文发送给对端后，对端是可以响应的，但由于没有该连接的有效信息，会产生一个 RST 报文，这样很快就会发现TCP连接已经被重置
- 对端程序崩溃，或对端由于其他原因导致报文不可达。当TCP保活的探测报文发送给对端后，石沉大海，没有响应，连续几次，达到保活探测次数后，TCP会报告该TCP连接已经死亡

