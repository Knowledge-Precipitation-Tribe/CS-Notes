SSL/TLS 协议基本流程：
- 客户端向服务器索要并验证服务器的公钥；
- 双方协商生产「会话秘钥」；
- 双方采用「会话秘钥」进行加密通信；

前两步也就是 SSL/TLS 的建立过程，也就是握手阶段。SSL/TLS 的「握手阶段」涉及四次通信。

# clientHello
首先客户端想要与服务器进行加密通信，也就是clientHello请求。

客户端会向服务器端发送以下数据：
- 客户端支持的SSL/TLS协议版本
- 客户端生成的随机数，用于生成之后的会话密钥
- 客户端支持的加密算法，如RSA等

# serverHello
服务器收到客户端请求后，向客户端发出响应，也就是serverHello。

服务器会向客户端回复以下数据：
- 确认SSL/TLS协议版本，如果服务器端不支持则关闭当前通信
- 服务器生成随机数，用于后面生成会话密钥
- 确认加密算法
- 服务器的数字证书

# 客户端回应
客户端收到服务器的响应后，首先通过浏览器或者操作系统内置的CA公钥来确认服务器的数字证书的真实性。如果证书没有问题，那么客户端会在证书中取出服务器的共钥，然后使用它加密报文。

客户端会向服务器发送以下数据：
- 另外一个随机数，用于后面生成会话密钥
- 告知之后的信息都会使用会话密钥进行加密通信
- 客户端握手结束通知，而且会将之前的数据做摘要，用于服务器校验


# 服务器回应
服务器收到客户端的随机数后，通过协商的加密算法生成本次通信的会话密钥。

服务器向客户端发送以下数据：
- 告知之后的信息都将使用会话密钥进行加密通信
- 服务器握手结束通知，表示服务器的握手阶段已经结束，而且会讲之前的数据做摘要，用于客户端校验

经过以上四个阶段，整个SSL/TLS的握手阶段全部结束。接下来，客户端与服务器进入加密通信，就完全是使用普通的HTTP协议，只不过用「会话秘钥」加密内容。