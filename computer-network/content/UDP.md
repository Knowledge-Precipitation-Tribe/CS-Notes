# 什么是UDP
UDP是无连接的传输层协议

# UDP头部格式
![](https://tva1.sinaimg.cn/large/008eGmZEgy1go9wi6ftitj317s0jk790.jpg)
- 目标端口和源端口：通知UDP协议将报文发送到哪个进程
- 包长度：该字段保存了UDP首部的长度和数据的长度之和
- 校验和：校验和是为了提供可靠的UDP首部和数据而设计的

# UDP与[[TCP]]的区别
- 连接
	- TCP是面向连接的传输层协议，传输数据之前要先建立连接
	- UDP是不需要连接的，直接发送数据
- 服务对象
	- TCP是一对一的两点服务
	- UDP支持一对一，一对多，多对多的交互通信
- 可靠性
	- TCP是可靠的，他可以保证数据无差错，不丢失，不重复，按需到达
	- UDP是尽最大努力交付，不保证那个可靠交付数据
- 流量控制，拥塞控制
	- TCP有拥塞控制和流量控制，保证数据的传输安全
	- UDP没有拥塞控制和流量控制，即使网路已经非常堵了，也不会影响UDP的发送效率
- 首部开销
	- TCP首部比较长，会有一定的开销，首部在没有使用选项字段是是20字节
	- UDP首部只有8字节，并且是一定不变的，开销较小
- 传输方式
	- TCP是流式传输，没有边界，但保证顺序和可靠
	- UDP是一个包一个包的发送，是有边界的，但可能会丢包和乱序
- 分片不同
	- TCP的数据大小如果大于[[MTU与MSS#^5dbb26|MSS]]大小，则会在传输层进行分片，目标主机收到后，也同样在传输 层组装TCP数据包，如果中途丢失了一个分片，只需要传输丢失的这个分片。
	- UDP的数据大小如果大于[[MTU与MSS#^cadf00|MTU]]大小，则会在IP层进行分片，目标主机收到后，在IP层组装完 数据，接着再传给传输层，但是如果中途丢了一个分片，则就需要重传所有的数据包，这样传输 效率非常差，所以通常UDP的报文应该小于MTU。

# TCP与UDP的应用场景
由于TCP是面向连接，能保证数据的可靠性交付，所以常用于：
- FTP文件传输
- HTTP/HTTPS

由于UDP面向无连接，它可以随时发送数据，再加上UDP本身的处理既简单又高效，因此经常用于：
- 包总量较少的通信，如DNS、SNMP等
- 视频、音频等多媒体通信
- 广播通信

