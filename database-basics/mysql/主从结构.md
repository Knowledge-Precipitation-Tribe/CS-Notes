# 什么MySQL的主从结构
MySQL的主从结构是采用主服务器下挂载从服务器的形式，MySQL采用主从结构主要可以实现读写分离，读写分离主要是因为写操作是比较耗时的，而数据库的读取是非常快的，所以采用读写分离的形式来解决数据库的写入，影响了查询的效率。

# 主从结构的好处
- 分摊服务器的压力，提高数据库服务的处理效率
- 增加冗余，提高服务可用性，当一台数据库服务器宕机时可以调整另外一台迅速对外提供服务

# 主从结构原理
主库将插入、更新或删除的记录写入到了binlog日志，然后从库连接到主库之后，从库有一个IO线程，将主库的binlog日志拷贝到自己本地，写入一个中继日志中。接着从库中有一个SQL线程会从中继日志读取binlog，然后执行binlog日志中的内容，也就是在自己本地再次执行一遍SQL，这样就可以保证自己跟主库的数据是一样的。

这里有一个非常重要的一点，就是**从库同步主库数据的过程是串行化的**，也就是说主库上并行的操作，在从库上会串行执行。所以这就是一个非常重要的点了，由于从库从主库拷贝日志以及串行执行SQL的特点，在高并发场景下，从库的数据一定会比主库慢一些，是有延时的。所以经常出现，刚写入主库的数据可能是读不到的，要过几十毫秒，甚至几百毫秒才能读取到。

而且这里还有另外一个问题，就是如果主库突然宕机，然后恰好数据还没同步到从库，那么有些数据可能在从库上是没有的，有些数据可能就丢失了。

# 半同步复制
半同步复制(semi-sync复制)，指的就是主库写入binlog日志之后，就会强制立即将数据同步到从库，从库将日志写入自己本地的relay log之后，接着会返回一个ack给主库，主库接收到至少一个从库的ack之后才会认为写操作完成了。