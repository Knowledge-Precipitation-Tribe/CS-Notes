## 什么是冷热分离？
冷热分离就是在处理数据时将数据库分成冷库和热库 2 个库，冷库指存放那些走到了终态的数据的数据库，热库指存放还需要修改的数据的数据库。

## 什么情况下使用冷热分离？
假设你的业务需求出现了如下情况，就可以考虑使用冷热分离的解决方案：

数据走到终态后，只有读没有写的需求，比如订单完结状态；

用户能接受新旧数据分开查询，比如有些电商网站默认只让查询 3 个月内的订单，如果你要查询 3 个月前的订单，还需要访问另外的单独页面。

## 冷热分离实现思路
在实际操作过程中，冷热分离整体实现思路如下：

（一）如何判断一个数据到底是冷数据还是热数据？
一般而言，在判断一个数据到底是冷数据还是热数据时，我们主要采用主表里的 1 个或多个字段组合的方式作为区分标识。其中，这个字段可以是时间维度，比如“下单时间”这个字段，我们可以把 3 个月前的订单数据当作冷数据，3个月内的当作热数据。

当然，这个字段也可以是状态维度，比如根据“订单状态”字段来区分，已完结的订单当作冷数据，未完结的订单当作热数据。

我们还可以采用组合字段的方式来区分，比如我们把下单时间 > 3 个月且状态为“已完结”的订单标识为冷数据，其他的当作热数据。

而在实际工作中，最终究竟使用哪种字段来判断，还是需要根据你的实际业务来定。

关于判断冷热数据的逻辑，这里还有 2 个注意要点必须说明：

- 如果一个数据被标识为冷数据，业务代码不会再对它进行写操作；

- 不会同时存在读冷/热数据的需求。

（二）如何触发冷热数据分离？
根据以上表格内容对比，我们可以得出每种触发逻辑的建议场景。

- 修改写操作的业务代码：建议在业务代码比较简单，并且不按照时间区分冷热数据时使用。

- 监听数据库变更日志：建议在业务代码比较复杂，不敢随意变更，并且不按照时间区分冷热数据时使用。

- 定时扫描数据库：建议在按照时间区分冷热数据时使用。

（三）如何实现冷热数据分离？

（四）如何使用冷热数据？